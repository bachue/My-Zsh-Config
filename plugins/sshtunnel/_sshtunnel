#compdef sshtunnel

case "$words[2]" in
    recv)
        arguments=(
            '--proxy-host[Hostname of the proxy ssh server. Required.]'
            '--proxy-port[Port of the proxy ssh server. Required.]'
            '--proxy-user[User on the proxy ssh server to login.]'
            '--proxy-ssh-port[Port of the proxy ssh server, default: 22.]'
            '--local-port[Port of the local server to forward to. Required.]'
            '--monitor-port[Port of the local server to monitor the connection, only need for autossh, default: 18524.]'
            '-i[Selects a file from which the identity (private key) for public key authentication is read.]'
        )
        _values 'recv' $arguments
        ;;
    send)
        arguments=(
            '--proxy-host[Hostname of the proxy ssh server. Required.]'
            '--proxy-port[Port of the proxy ssh server to forward to. Default: 8080.]'
            '--proxy-user[User on the proxy ssh server to login.]'
            '--proxy-ssh-port[Port of the proxy ssh server, default: 22.]'
            '--local-port[Port of the local server to be listened. Default: 18525.]'
            '--monitor-port[Port of the local server to monitor the connection, only need for autossh, default: 18524.]'
            '-i[Selects a file from which the identity (private key) for public key authentication is read.]'
        )
        _values 'send' $arguments
        ;;
    *)
        arguments=(
            'send[Use sshtunnel as a sender]'
            'recv[Use sshtunnel as a receiver]'
        )
        _values 'sshtunnel' $arguments
        ;;
esac

return 0
